<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GPStream Security Library: RXN_security.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>RXN_security.h File Reference</h1>
<p>Defines the security related functions.  
<a href="#_details">More...</a></p>
<code>#include &quot;RXN_data_types.h&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRXN__client__info__t.html">RXN_client_info_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A structure containing client information.  <a href="structRXN__client__info__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRXN__password__t.html">RXN_password_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A structure containing client password.  <a href="structRXN__password__t.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RXN__security_8h.html#a7703530242d5d6d3884340f734fad44e">MAX_FIELD_LENGTH</a>&nbsp;&nbsp;&nbsp;50</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum length for fields.  <a href="#a7703530242d5d6d3884340f734fad44e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RXN__security_8h.html#a0bbe35fda939018d5672a6cfc02cfa51">PASSWORD_LENGTH</a>&nbsp;&nbsp;&nbsp;41</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum length for password.  <a href="#a0bbe35fda939018d5672a6cfc02cfa51"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RXN__security_8h.html#acabc3f96567caf40c2441a3d0138d2d6">RXN_CONSTANT_MAX_SECURITY_EXPIRY_DATE_LENGTH</a>&nbsp;&nbsp;&nbsp;20</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum length for the expiry date string.  <a href="#acabc3f96567caf40c2441a3d0138d2d6"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RXN__security_8h.html#acb62a576aea43d0332c40555e0a15272">RXN_Generate_Password</a> (const <a class="el" href="structRXN__client__info__t.html">RXN_client_info_t</a> *client_info, <a class="el" href="structRXN__password__t.html">RXN_password_t</a> *password)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generates the password based on client information for authenticating with PGPS (tm) server.  <a href="#acb62a576aea43d0332c40555e0a15272"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RXN__security_8h.html#ac1dd56944e965491e3bc4dfeaf2115af">RXN_Get_Security_Expiry_Date</a> (char expiryDate[RXN_CONSTANT_MAX_SECURITY_EXPIRY_DATE_LENGTH])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the expiry time of the security key in ASCII text.  <a href="#ac1dd56944e965491e3bc4dfeaf2115af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RXN__security_8h.html#a65713c2480f5850008e89ac79c17c211">RXN_Is_Security_Valid</a> (const U32 time)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Validates the security key being used against the specified time.  <a href="#a65713c2480f5850008e89ac79c17c211"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RXN__security_8h.html#a72377aca929f5c626be7a2967b4e7798">RXN_Set_Security_Key</a> (const char *security_key, const U32 security_key_length, const char *vendor_id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Provide the security key to the library.  <a href="#a72377aca929f5c626be7a2967b4e7798"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Defines the security related functions. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a7703530242d5d6d3884340f734fad44e"></a><!-- doxytag: member="RXN_security.h::MAX_FIELD_LENGTH" ref="a7703530242d5d6d3884340f734fad44e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_FIELD_LENGTH&nbsp;&nbsp;&nbsp;50</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The maximum length for fields. </p>

</div>
</div>
<a class="anchor" id="a0bbe35fda939018d5672a6cfc02cfa51"></a><!-- doxytag: member="RXN_security.h::PASSWORD_LENGTH" ref="a0bbe35fda939018d5672a6cfc02cfa51" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PASSWORD_LENGTH&nbsp;&nbsp;&nbsp;41</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The maximum length for password. </p>

</div>
</div>
<a class="anchor" id="acabc3f96567caf40c2441a3d0138d2d6"></a><!-- doxytag: member="RXN_security.h::RXN_CONSTANT_MAX_SECURITY_EXPIRY_DATE_LENGTH" ref="acabc3f96567caf40c2441a3d0138d2d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RXN_CONSTANT_MAX_SECURITY_EXPIRY_DATE_LENGTH&nbsp;&nbsp;&nbsp;20</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The maximum length for the expiry date string. </p>
<dl class="since"><dt><b>Since:</b></dt><dd>4.0.2 </dd></dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="acb62a576aea43d0332c40555e0a15272"></a><!-- doxytag: member="RXN_security.h::RXN_Generate_Password" ref="acb62a576aea43d0332c40555e0a15272" args="(const RXN_client_info_t *client_info, RXN_password_t *password)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U16 RXN_Generate_Password </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structRXN__client__info__t.html">RXN_client_info_t</a> *&nbsp;</td>
          <td class="paramname"> <em>client_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRXN__password__t.html">RXN_password_t</a> *&nbsp;</td>
          <td class="paramname"> <em>password</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates the password based on client information for authenticating with PGPS (tm) server. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>client_info</em>&nbsp;</td><td>[IN] This is a data structure described in the PGPS (tm) data structures section of this document. The data structure contains all the information that was used to register and enable the GPStream (tm) PGPS (tm) data service for each specific device. The structure includes data fields to hold the vendor id, a device id, and the current time in GPS seconds.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>password</em>&nbsp;</td><td>[OUT] This is a data structure described in the PGPS (tm) data structures section of this document. Upon successful completion of this function, a password will be computed and filled into the supplied memory location. The password is required when performing Seed requests and Clock update requests from PGPS (tm) data service.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>RXN_SUCCESS if the password can be computed successfully. RXN_FAIL otherwise.</dd></dl>
<p>PGPS (tm) is a server based assistance technology. In order to restrict PGPS (tm) servers from authorized access only, all requests to the PGPS (tm) server for Seeds and Clock updates must be authenticated. This function is used to generate the required password based on the supplied client information. After the password has been generated, the client can perform an HTTP GET request containing the vendor ID, model ID, device ID, and password to request the appropriate type of data from the server. At the time of registration, each customer will be assigned a unique vendor ID and will also receive a customer specific security library containing the <a class="el" href="RXN__security_8h.html#acb62a576aea43d0332c40555e0a15272" title="Generates the password based on client information for authenticating with PGPS (tm)...">RXN_Generate_Password()</a> function.</p>
<p><b>Applicable Standards</b><br/>
 Proprietary to GPStream (tm) PGPS (tm) client software, GPStrem PGPS (tm) server.</p>
<dl class="attention"><dt><b>Attention:</b></dt><dd>The password is time sensitive so the generate password function must be used every time prior to making a PGPS (tm) server request.</dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>1.1.0</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structRXN__client__info__t.html" title="A structure containing client information.">RXN_client_info_t</a></dd>
<dd>
<a class="el" href="structRXN__password__t.html" title="A structure containing client password.">RXN_password_t</a></dd>
<dd>
RXN_Decode()</dd></dl>
<p><b>Example Usage</b> </p>
<div class="fragment"><pre class="fragment"> <span class="comment">//Variables for required to generate assistance data.</span>
 <a class="code" href="structRXN__client__info__t.html" title="A structure containing client information.">RXN_client_info_t</a> client_info;
 <a class="code" href="structRXN__password__t.html" title="A structure containing client password.">RXN_password_t</a> password;
   
 <span class="comment">//Variable to store the status of the following operations.</span>
 U16 password_generated;
   
 Populate the <a class="code" href="structRXN__client__info__t.html" title="A structure containing client information.">RXN_client_info_t</a> structure with the appropriate
  client information.
 memcpy(client_info.<a class="code" href="structRXN__client__info__t.html#abdbffdb11d5e1061b5cf4f564bae6611">vendor_id</a>, DEFAULT_VENDOR_ID, <span class="keyword">sizeof</span>(client_info.<a class="code" href="structRXN__client__info__t.html#abdbffdb11d5e1061b5cf4f564bae6611">vendor_id</a>));
 memcpy(client_info.<a class="code" href="structRXN__client__info__t.html#a80eff292fde996388e67bf4572455c8d">device_id</a>, DEFAULT_DEVICE_ID, <span class="keyword">sizeof</span>(client_info.<a class="code" href="structRXN__client__info__t.html#a80eff292fde996388e67bf4572455c8d">device_id</a>));
 client_info.<a class="code" href="structRXN__client__info__t.html#ae0acf7c0573822327725a2dc30588206">gps_seconds</a> = get_current_time_in_gps_seconds();

 <span class="comment">//Generate the password.</span>
 password_generated = <a class="code" href="RXN__security_8h.html#acb62a576aea43d0332c40555e0a15272" title="Generates the password based on client information for authenticating with PGPS (tm)...">RXN_Generate_Password</a>(&amp;client_info, &amp;password);

 printf(<span class="stringliteral">&quot;vendor_id: %s\n&quot;</span>, client_info.<a class="code" href="structRXN__client__info__t.html#abdbffdb11d5e1061b5cf4f564bae6611">vendor_id</a>);
 printf(<span class="stringliteral">&quot;device_id: %s\n&quot;</span>, client_info.<a class="code" href="structRXN__client__info__t.html#a80eff292fde996388e67bf4572455c8d">device_id</a>);
 printf(<span class="stringliteral">&quot;gps_seconds: %u\n&quot;</span>, client_info.<a class="code" href="structRXN__client__info__t.html#ae0acf7c0573822327725a2dc30588206">gps_seconds</a>);
 printf(<span class="stringliteral">&quot;password generated: %s\n&quot;</span>, (password_generated == RXN_SUCCESS) ? <span class="stringliteral">&quot;SUCCESS&quot;</span> : <span class="stringliteral">&quot;FAIL&quot;</span>);
 printf(<span class="stringliteral">&quot;password: %s\n&quot;</span>, password.<a class="code" href="structRXN__password__t.html#a975f54d2f915f71b8a1786e2d6400c04">password</a>);
</pre></div> 
</div>
</div>
<a class="anchor" id="ac1dd56944e965491e3bc4dfeaf2115af"></a><!-- doxytag: member="RXN_security.h::RXN_Get_Security_Expiry_Date" ref="ac1dd56944e965491e3bc4dfeaf2115af" args="(char expiryDate[RXN_CONSTANT_MAX_SECURITY_EXPIRY_DATE_LENGTH])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RXN_Get_Security_Expiry_Date </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>expiryDate</em>[RXN_CONSTANT_MAX_SECURITY_EXPIRY_DATE_LENGTH]</td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the expiry time of the security key in ASCII text. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>expiryDate</em>&nbsp;</td><td>[OUT] A memory location to be filled with the expiry date. This is a null terminated string and is at most RXN_CONSTANT_MAX_SECURITY_EXPIRY_DATE_LENGTH (50) characters long.</td></tr>
  </table>
  </dd>
</dl>
<p>This function returns the expiry date in "YYYY-MM-DD UTC" format. If no security key was provided, this function will return a null terminated empty string.</p>
<p><b>Applicable Standards</b><br/>
 Proprietary to GPStream (tm) PGPS (tm) client software.</p>
<dl class="since"><dt><b>Since:</b></dt><dd>4.0.2</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="RXN__security_8h.html#a72377aca929f5c626be7a2967b4e7798" title="Provide the security key to the library.">RXN_Set_Security_Key()</a></dd>
<dd>
<a class="el" href="RXN__security_8h.html#a65713c2480f5850008e89ac79c17c211" title="Validates the security key being used against the specified time.">RXN_Is_Security_Valid()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a65713c2480f5850008e89ac79c17c211"></a><!-- doxytag: member="RXN_security.h::RXN_Is_Security_Valid" ref="a65713c2480f5850008e89ac79c17c211" args="(const U32 time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U16 RXN_Is_Security_Valid </td>
          <td>(</td>
          <td class="paramtype">const U32&nbsp;</td>
          <td class="paramname"> <em>time</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Validates the security key being used against the specified time. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>time</em>&nbsp;</td><td>[IN] The current time in GPS seconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>RXN_SUCCESS If the function completes successfully.</dd>
<dd>
RXN_FAIL If the function fails.</dd></dl>
<p>This function will validate if the user supplied key is valid for the specified time. Typically, the user will pass in the current GPS time for validation.</p>
<p><b>Applicable Standards</b><br/>
 Proprietary to GPStream (tm) PGPS (tm) client software.</p>
<dl class="since"><dt><b>Since:</b></dt><dd>4.0.2</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="RXN__security_8h.html#a72377aca929f5c626be7a2967b4e7798" title="Provide the security key to the library.">RXN_Set_Security_Key()</a></dd>
<dd>
<a class="el" href="RXN__security_8h.html#ac1dd56944e965491e3bc4dfeaf2115af" title="Get the expiry time of the security key in ASCII text.">RXN_Get_Security_Expiry_Date()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a72377aca929f5c626be7a2967b4e7798"></a><!-- doxytag: member="RXN_security.h::RXN_Set_Security_Key" ref="a72377aca929f5c626be7a2967b4e7798" args="(const char *security_key, const U32 security_key_length, const char *vendor_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U16 RXN_Set_Security_Key </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>security_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const U32&nbsp;</td>
          <td class="paramname"> <em>security_key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>vendor_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Provide the security key to the library. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>security_key</em>&nbsp;</td><td>[IN] The pointer to a block of memory containing the security key.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>security_key_length</em>&nbsp;</td><td>[IN] The length of the security key.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vendor_id</em>&nbsp;</td><td>[IN] The vendor specific id.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>RXN_SUCCESS If the function completes successfully.</dd>
<dd>
RXN_FAIL If the function fails.</dd></dl>
<p><b>Applicable Standards</b><br/>
 Proprietary to GPStream (tm) PGPS (tm) client software, SAGPS (tm) client software.</p>
<dl class="attention"><dt><b>Attention:</b></dt><dd>This function must be called with a valid key before <a class="el" href="RXN__security_8h.html#acb62a576aea43d0332c40555e0a15272" title="Generates the password based on client information for authenticating with PGPS (tm)...">RXN_Generate_Password()</a> can be used.</dd></dl>
<dl class="since"><dt><b>Since:</b></dt><dd>3.0.0 </dd></dl>

</div>
</div>
</div>
<hr size="1"><address style="text-align: left;">
<br/>
<a href="http://www.rxnetworks.ca" target="_blank"><img border="0" src="rxn-logo.png"/></a><br/><br/>
Copyright (c) 2014 Rx Networks, Inc. All rights reserved.<br/>
<br/>
Property of Rx Networks<br/>
Proprietary and Confidential<br/>
<br/>
Any use, distribution, or copying of this document requires a 
license agreement with Rx Networks. 
Any product development based on the contents of this document 
requires a license agreement with Rx Networks.<br/>
<br/>
<hr size="1"><address style="text-align: right;"><small>
Generated on Wed Jun 4 14:23:19 2014 for GPStream Security Library by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.6.3</small></address>
</body>
</html>
